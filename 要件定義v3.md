# コミュニティ作品ギャラリー 要件定義書 v3.1（AI 非組込版）

---

## 0. ドキュメント管理
| 項目 | 内容 |
| --- | --- |
| ドキュメント ID | CG-REQ-2025-06-09 |
| 作成日 | 2025-06-09 |
| 作成者 | BOSS（奥村龍晃） |
| 版数 | 3.2 |
| 更新履歴 | 3.1 → 3.2：MVP を画像投稿のみに限定、開発期間を 12 週間へ延長、パフォーマンス・コスト要件を現実ラインに調整 |

---

## 1. 開発の目的・ビジョン
| 項目 | 内容 |
| --- | --- |
| **開発目的** | ① BOSS が実践を通じて Web 開発スキルを習得する<br>② コミュニティ内で作品を安全・気軽に共有し、創作意欲を高め合う |
| **ビジョン** | 「投稿 → リアクション → 新作誕生」が循環する**“創作スパイラル”**を実現 |
| **成功指標 (KPI)** | - 初期 20 名中、月 1 投稿以上 = 8 名以上<br>- 1 作品あたりリアクション（いいね＋コメント）平均 2 以上 |

> **注意**：本サイトには生成 AI 機能や外部 AI API を組み込まない。生成 AI（ChatGPT / Claude 等）は**開発支援ツール**としてのみ使用する。

---

## 2. 利用者ペルソナ & ユースケース
| ペルソナ | 動機 | 主なシナリオ |
| --- | --- | --- |
| クリエイター | 作品を披露し感想を得たい | 招待登録 → 投稿 → リアクション受領 |
| 閲覧者 | 刺激や学びを得たい | 一覧閲覧 → 気になる作品をブックマーク |
| 運営者（BOSS） | 活性化 & 開発力向上 | 管理画面で審査・統計確認・機能改修 |

---

## 3. 価値提供 & 継続利用トリガ
| 価値 | 利益 | 実装イメージ |
| --- | --- | --- |
| クローズド空間 | 実験的作品も安心公開 | 招待制 Magic Link |
| 簡単アップロード | 手間なく発表できる | D&D + プログレスバー |
| 双方向リアクション | モチベーション持続 | コメント・いいね通知（メール／Discord） |
| 発見性 | 異ジャンル刺激 | Pinterest 風ボード + 手動タグ／簡易ランダム表示 |
| **ワクワクトリガ** | ①通知快感 ②注目作品ハイライト ③バッジ ④月例テーマ | 詳細は §6 |

---

## 4. 機能要件

### 4.1 機能一覧
| # | 区分 | 機能 | 状態 |
| --- | --- | --- | --- |
| 1 | ★ | 招待制 Magic Link 認証 | MVP |
| 2 | ★ | 作品投稿（画像／テキスト） | MVP |
| 3 | ★ | 作品一覧（ページネーション） | MVP |
| 4 | ★ | 作品詳細（コメント・いいね） | MVP |
| 5 | ★ | プロフィールページ | MVP |
| 6 | ☆ | タグフィルタ | 拡張 |
| 7 | ☆ | 通知機能（メール・Discord） | 拡張 |
| 8 | ☆ | 月例テーマチャレンジ & バッジ | 拡張 |

### 4.2 定量仕様（YAML）
```yaml
upload_constraints:
  max_files: 3
  allowed_types: [image/*, text/markdown]
  per_file_limit_mb: 10

works_pagination:
  strategy: page
  page_size: 20

budget_guardrail:
  cloudinary_max_gb: 25      # 無料枠
  supabase_egress_gb: 50     # 従量課金上限
  alert_threshold_pct: 90
```

---

## 5. 非機能要件
| 項目 | 必須水準 | 測定方法／受入基準 |
| --- | --- | --- |
| セキュリティ | 招待制 + Supabase RLS | 未招待メールは登録不可 |
| パフォーマンス | 初回表示 < 3 秒（WiFi） | Lighthouse Performance ≥ 80 |
| アクセシビリティ | WCAG 2.1 AA | Lighthouse a11y ≥ 90 |
| コスト | 月 $0–$20 | 予算ガードレールで監視 |
| 保守性 | GitHub Actions CI/CD + Prettier + ESLint | main Push 時 CI 通過 |

---

## 6. ワクワクトリガ詳細
| ID | 名称 | 実装概要（AI 不使用） |
| --- | --- | --- |
| T1 | リアクション通知 | Supabase Edge Function → SendGrid / Discord Webhook |
| T2 | 今日の注目作品 | ログイン時ランダム 3 件 Carousel（単純シャッフル） |
| T3 | レベルバッジ | 投稿数 & リアクション数を Cron 集計 |
| T4 | 月例テーマ | 管理画面でお題設定 → タグ付与 |

---

## 7. システム構成
| 層 | 採用技術 | 初心者向け説明 |
| --- | --- | --- |
| フロント | Next.js 15 + TypeScript + Tailwind | ページをレゴ感覚で組立 |
| 認証／DB | Supabase Auth + Postgres | 鍵付きオンライン表計算 |
| ストレージ | Cloudinary | 自動リサイズ倉庫 |
| デプロイ | Vercel | GitHub push → URL 自動生成 |
| テスト | vitest + 手動チェックリスト | 単体テストと手動シナリオ |

---

## 8. API & データモデル
**※ API はサイト内部の CRUD 用のみ。外部 AI API は使用しない。**

(OpenAPI 抜粋は 3.0 と同一のため省略)

---

## 9. ユーザーストーリー & 受け入れ基準
（3.0 版から変更なし）

---

## 10. 開発ワークフロー & コマンド
（3.0 版から変更なし）

---

## 11. 監視 & コストアラート
（3.0 版から変更なし）

---

## 12. 開発ロードマップ（12 週間）

| 週 | 目標 | 学習テーマ |
| --- | --- | --- |
| 1–2 | Next.js セットアップ、画像投稿フォーム | React フォーム基礎 |
| 3–4 | 一覧 & 詳細（ページネーション） | Supabase CRUD / RLS |
| 5–6 | いいね・コメント | リアルタイム更新 (on() 監視) |
| 7–8 | 画像最適化 & Lighthouse 改善 | Web 速度最適化 |
| 9–10 | 認証リファクタ & UI 微調整 | Magic Link 深掘り |
| 11 | 手動テスト & バグ修正 | vitest 導入 |
| 12 | デプロイ & 内部リリース | Vercel 環境変数管理 |

---

## 13. リスク & 対策
| リスク | 対策 |
| --- | --- |
| ファイル容量超過 | UI 残容量表示 + 自動圧縮 |
| スパム登録 | reCAPTCHA + 招待メール |
| 学習負荷 | 毎週動く成果物を Discord で共有しフィードバック |

---

## 14. AI アシスタント用ガイドメタデータ
```yaml
ai_assistant_guide:
  role: >
    You are a senior full‑stack mentor assisting a non‑engineer developer.
    The product itself does NOT include generative‑AI features.
  rules:
    - コード例は Next.js + TypeScript
    - OpenAPI & JSONSchema を優先
    - 受入基準を満たすコードのみ提案
    - 未確定事項は質問で確認してから提案
```

---

### 最終確認
- **サイト内部に生成AI機能を組み込まない**方針を明記。  
- 開発初心者でも迷わないよう機能・非機能・トリガをシンプル化。  
- 生成AIは“開発支援”としてのみ活用できるよう AI ガイドメタデータを保持。 