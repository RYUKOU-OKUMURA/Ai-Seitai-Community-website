# コミュニティ作品展示サイト 要件定義書

## 1. サイト概要

### 目的
コミュニティメンバーが作成した作品（画像・動画・記事・曲）を展示し、メンバー同士で楽しく共有できるクローズドな場を提供する。

### ターゲットユーザー
- コミュニティメンバー（作品投稿者）
- コミュニティメンバー（閲覧者）

### コンセプト
- 楽しく作品を投稿できる雰囲気
- たくさんの作品で埋め尽くされた賑やかな空間
- シンプルで管理しやすいシステム
- オシャレなデザイン

## 2. 機能要件

### 必須機能
1. **作品展示機能**
   - 画像の表示
   - 動画の再生
   - 記事の表示
   - 音楽の再生

2. **作品投稿機能**
   - メンバーによる作品アップロード
   - 作品情報の入力（タイトル、説明、カテゴリ等）

3. **テーマ別ページ**
   - 各テーマ（カテゴリ）ごとの個別ページ
   - テーマ内での作品一覧表示


### 不要な機能
- お問い合わせフォーム
- ビジネス関連機能全般
- SEO対策機能
- 外部公開機能
- ログイン・認証機能

## 3. 非機能要件

### セキュリティ
- URLを知っている人だけがアクセスできる仕組み
- 作品データの保護
- 不正なアップロードの防止

### パフォーマンス
- 作品の読み込み速度の最適化
- 画像・動画の適切な圧縮

### 保守性
- シンプルなファイル構成
- 初心者でも管理しやすい構造
- 更新作業の簡易化

### デザイン
- オシャレで洗練された見た目
- 派手なアニメーションは不要
- 作品が映えるレイアウト

## 4. 技術方針

### 開発方針
- 初心者でも理解・管理しやすい技術選定
- 過度に複雑な構成を避ける
- メンテナンスのしやすさを優先

### 推奨技術スタック（案）

#### 必要な技術要素の説明

1. **フロントエンド（見た目の部分）**
   - **Next.js**（推奨）
     - 理由：初心者でも扱いやすく、必要な機能が最初から揃っている
     - メリット：画像の最適化機能が標準搭載、ファイル構成がシンプル
   
2. **バックエンド（裏側の処理）**
   - **Supabase**（推奨）
     - 理由：設定が簡単で、データベースと認証機能がセットになっている
     - メリット：管理画面があり、プログラミング知識が少なくても操作可能

3. **データ保存場所**
   - **作品ファイル**：Supabase Storage または Cloudinary
     - 画像・動画・音楽ファイルを保存する場所
     - 自動で最適なサイズに変換してくれる
   - **作品情報**：Supabase Database
     - タイトルや説明文などのテキスト情報を保存

4. **ホスティング（サイトを公開する場所）**
   - **Vercel**（推奨）
     - Next.jsと相性が良い
     - 無料プランで十分対応可能
     - デプロイ（公開）が簡単

#### なぜこの組み合わせが良いのか
- 全て無料プランから始められる
- 日本語の情報が豊富
- 初心者向けのチュートリアルが多い
- 将来的な拡張も可能

## 5. コンテンツ構成

### トップページ
- 最新作品の表示
- テーマ別入り口
- 楽しい雰囲気の演出

### テーマ別ページ
- テーマごとの作品一覧
- 作品のサムネイル表示
- 詳細表示への導線

### 作品詳細ページ
- 作品の全画面表示
- 作品情報の表示
- 投稿者情報

### 投稿ページ
- シンプルな投稿フォーム
- ドラッグ&ドロップ対応
- プレビュー機能

## 6. 今後の検討事項
- 具体的な技術スタックの選定
- デザインテーマの決定
- 作品カテゴリの整理
- URLの共有方法の検討

## 7. さらに必要な検討項目

### 作品カテゴリ・テーマの具体化
**決定したカテゴリ：**
1. **ビジュアル** - 画像・イラスト・写真など
2. **ムービー** - 動画・アニメーション
3. **サウンド** - 曲・楽曲・音声データ
4. **テキスト** - ブログ記事・小説・詩など

### デザインの方向性
**決定した方針：**
- フロントページで全カテゴリの作品を一覧表示
- 各カテゴリごとの個別ページを作成
- 作品が一目でわかるビジュアル重視のレイアウト
- シンプルで見やすいグリッド表示

### 開発の進め方
**決定した開発フロー：**
1. **フェーズ1：フロントエンド開発**
   - フロントページのデザイン作成
   - カテゴリ別ページのレイアウト設計
   - レスポンシブデザインの実装

2. **フェーズ2：バックエンド開発**
   - データベース設計
   - ファイルアップロード機能
   - 作品管理システムの構築

3. **フェーズ3：セキュリティ強化**
   - アクセス制限の実装
   - ファイルアップロードの検証
   - データ保護の強化

### 運用ルール
**開発と並行して決定予定：**
- ファイルサイズ制限（サーバー容量に応じて設定）
- 対応ファイル形式の決定
- アップロード権限の管理方法
- 定期的なバックアップ体制

### 必要な素材・リソース
- ロゴやアイコンの準備
- デフォルト画像（作品がない時の表示）
- エラーメッセージの文言

## 8. 決定した仕様詳細

### 投稿システム
- **簡易メンバー登録制**
  - 初回のみメールアドレスと表示名を登録
  - 登録ページのURLは限定配布（招待制）
  - 登録後は表示名で投稿可能
- **投稿時は登録済みの名前を入力**（未登録名では投稿不可）
- **一度投稿したら編集不可**（信頼性の確保）
- **削除権限は管理者のみ**

### 作品の表示・インタラクション
- **Pinterest風のビジュアル重視レイアウト**
  - グリッド表示でサムネイルが並ぶ
  - 画像はカード型で表示
  - ホバーで作品情報表示
- **インタラクション機能**
  - コメント機能（作品ごと）
  - いいね機能
  - 投稿者名クリックで同じ人の作品一覧表示

### セキュリティ方針
- **3段階のアクセス制限**
  1. サイト閲覧：URLを知っている人のみ
  2. メンバー登録：登録用URLを知っている人のみ
  3. 作品投稿：登録済みメンバーのみ
- **なりすまし防止**（登録名でのみ投稿可能）
- **不正投稿の追跡可能**（メールアドレスと紐付け）

### 技術実装の方向性
- **投稿管理**：Supabaseのデータベースで投稿者名と作品を紐付け
- **ファイル管理**：Supabase StorageまたはCloudinaryで画像・動画を管理
- **アクセス制限**：環境変数でURLパスを管理、知っている人のみアクセス可能に

## 9. 開発イメージの確定

### サイトの雰囲気
- **Pinterest × コミュニティギャラリー**
- 作品が主役のビジュアル重視
- 楽しくカジュアルな雰囲気
- 投稿者同士の緩やかなつながり

### ユーザーフロー
1. **閲覧者**
   - トップページで全作品をグリッド表示で閲覧
   - カテゴリー別に絞り込み可能
   - 作品クリックで詳細表示（拡大・コメント・いいね）
   - 投稿者名クリックでその人の作品一覧

2. **新規メンバー**
   - 登録ページ（限定配布URL）にアクセス
   - メールアドレスと表示名を登録
   - 登録完了後、投稿可能に

3. **投稿者（登録済みメンバー）**
   - 投稿ページにアクセス
   - 登録名入力 → カテゴリ選択 → ファイルアップロード
   - プレビュー確認 → 投稿（編集不可）

### 管理者機能
- 不適切な投稿の削除
- アクセス統計の確認
- バックアップ管理

## 10. 解決された課題と実装詳細

### メンバー管理システム
- **簡易登録制で解決**
  - メールアドレスと表示名の組み合わせで一意性確保
  - 同じ表示名の登録を防ぐ（早い者勝ち）
  - なりすましを防止（登録名のみ投稿可能）

### 実装フロー
1. **メンバー登録**
   - 登録ページで「メールアドレス」「表示名」を入力
   - DBに保存（表示名の重複チェック）
   - 登録完了メール送信（任意）

2. **投稿時の認証**
   - 投稿フォームで表示名入力
   - DBで登録済みかチェック
   - 登録済みなら投稿を許可

### インタラクション機能の詳細
- **コメント投稿は誰ができる？**
  - 全員？投稿者のみ？名前入力必須？
- **いいねの重複防止は？**
  - IPアドレス？Cookie？制限なし？
- **スパムコメント対策は？**

### 技術的な実装課題
- **管理者の認証方法**（管理者はログインが必要？）
- **ファイルサイズ制限**（画像：?MB、動画：?MB、音楽：?MB）
- **同時アップロード数の制限**
- **ストレージ容量の上限と対策**

### ユーザー体験の詳細
- **作品の表示順**（新着順？ランダム？人気順？）
- **ページネーション**（一度に何件表示？無限スクロール？）
- **モバイル対応**（レスポンシブ必須？）
- **作品が増えた時の検索・フィルター機能**

### 運用・将来性
- **作品数が1000件、10000件になった時の対策**
- **カテゴリの追加・変更の可能性**
- **多言語対応の必要性**
- **アーカイブ機能（古い作品の扱い）**

### 本質的な問い
- **「セキュリティをしっかり」と「ログインなし」は両立可能？**
- **現在の仕様で本当に「クローズドコミュニティ」と言える？**

## 11. 開発タスクと技術仕様

### データベース設計
**テーブル構成：**
```
members（メンバー）
- id (UUID)
- email (unique)
- display_name (unique)
- created_at

works（作品）
- id (UUID)
- member_id (FK)
- category (ビジュアル/ムービー/サウンド/テキスト)
- title
- description
- file_url
- thumbnail_url
- created_at

comments（コメント）
- id (UUID)
- work_id (FK)
- commenter_name
- content
- created_at

likes（いいね）
- id (UUID)
- work_id (FK)
- ip_address (重複防止用)
- created_at
```

### ページ構成
- `/` - トップページ（全作品一覧）
- `/category/[category]` - カテゴリ別ページ
- `/work/[id]` - 作品詳細ページ
- `/member/[name]` - メンバー作品一覧
- `/upload` - 投稿ページ
- `/register` - メンバー登録ページ（隠しURL）
- `/admin` - 管理画面（隠しURL）

### ファイル制限
- 画像：JPG, PNG, GIF（最大10MB）
- 動画：MP4, MOV（最大100MB）
- 音楽：MP3, WAV（最大50MB）
- テキスト：マークダウン形式

### 開発スケジュール
- 第1〜2週：基盤構築
- 第3〜4週：コア機能実装
- 第5〜6週：インタラクション機能
- 第7〜8週：管理機能・最適化

**詳細なタスク管理は「開発タスク管理.md」を参照**